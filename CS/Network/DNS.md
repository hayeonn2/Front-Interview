# 💻 DNS(Domain Name System)

- DNS는 사람이 읽을 수 있는 도메인 이름을 기계가 읽을 수 있는 IP주소로 변환하거나 IP를 넣으면 해당하는 도메인을 반환하는 시스템이다.
- 예시

```
네이버에 접속하자.
우리는 네이버의 IP 주소를 알고 있어야하고 그 아이피 주소를 통해 접속해야 한다.
하지만 우리는 일반적인 대명사로서 naver.com을 사용한다.
그러면 DNS Server는 naver.com이 가리키는 IP를 브라우저에게 반환한다.
즉 DNS Server는 웹 서버 주소에 해당하는 IP 주소 테이블을 가지고 있는 서버라고 보면 된다.

1. DNS Query
DNS 서버에서 Domain Name을 이용해 IP를 받아온다.
이때 Domain Name Server에 접속하는 유저에 대해서 Round Robin 방식으로 IP를 할당한다.

2. IP Communication
IP를 받아온 유저는 리퀘스트 메시지 발송을 통해 정상적으로 네트워크 통신을 실시한다.
```

## 🏷️ Round Robin

- DNS 서버 구성 방식 중 하나이다.
- Domain에 대한 IP 요청 쿼리 시 round-robin 방식으로 IP를 반환한다.
- DNS 서버에서 하나의 도메인명에 여러 개의 IP 주소를 등록시켜두고 클라이언트로부터 요청이 있으면 등록되어 있는 IP 주소를 순서대로 반환하는 방식
- 반환되는 IP 주소가 바뀌므로 클라이언트의 행선지도 바뀌어 결과적으로 커넥션이 분배된다.

## 🏷️ Round Robin 문제점

1. 서버의 수 만큼 공인 IP 주소가 필요하다.

- 부하 분산을 위해 서버의 대수를 늘리기 위해 그 만큼 공인 IP가 필요하다.

2. 균등하게 분산되지 않는다.

- 스마트폰 접속 경우 프록시 서버를 공유하는데 프록시 서버에서는 변환 결과가 일정 시간 동안 캐싱된다. 같은 프록시 서버를 경유하는 접속은 항상 같은 서버로 접속된다.

3. 서버가 다운되어도 확인 불가하다.

- DNS 서버는 웹 서버의 부하나 접속 수 등 상황에 따라 질의결과를 제어할 수 없다.
- 전혀 감지가 안되므로 어떤 원인으로 다운돼도 검출하지 못하고 유저에게 제공된다.

## 🏷️ Round Robin 보완 방법

### 가중치 편성 방식 (WRR: Weighted round robin)

- 각각의 웹 서버에 가중치를 가미해 분산 비율을 변경한다.
- 가중치가 큰 서버일수록 빈번하게 선택되므로 처리능력이 높은 서버를 높게 설정하는 것이 좋다.

### 최소 연결 방식 (Least connection)

- 접속 클라이언트 수가 가장 적은 서버를 선택한다.
- 로드밸런서에서 실시간으로 connection 수를 관리하거나 각 서버에서 주기적으로 알려주는 것이 필요하다.
  > 로드 밸런서 아키텍쳐
  > 서버에 가해지는 부하(로드)를 분산(밸런싱)해주는 장치 또는 기술을 통칭한다.
  > 한 대의 서버로 부하가 집중되지 않도록 트래픽을 관리해 각각의 서버가 최적의 퍼포먼스를 보일 수 있게 한다.
