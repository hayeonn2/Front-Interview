# 💻 HTTP/1.1, HTTP/2.0, HTTP/3.0

## HTTP/1.1과 HTTP/2.0 차이점

### 1. 프로토콜 형태

- HTTP/1.1은 텍스트 기반의 프로토콜이어서 전송 데이터 용량이 크다.
- HTTP/2.0은 이진 형태의 프로토콜로 전송 데이터 용량이 작아져 데이터 전송을 더 효율적으로 처리할 수 있다.

<br/>

### 2. 다중화

- HTTP/1.1은 기본적으로 하나의 TCP 연결을 통해 하나의 요청과 응답을 처리한다.

  - 여러 개 요청을 처리하기 위해 여러 개 TCP 연결이 필요하다. → 불필요한 지연과 복잡성 발생!

- HTTP/2.0은 하나의 TCP 연결에서 여러 개 요청, 응답 동시 처리하도록 다중화(Multiplexing)을 지원한다.
  - 여러 개의 요청과 응답을 '병렬'로 처리하며 불필요한 대기 시간을 줄이고 전송 속도를 높인다.

[참고]
HTTP/1.1에서 Keep-Alive를 사용하면 요청을 보내고 반환을 받은 후에도 커넥션을 유지할 수 있다. 하지만 위 이미지에서 중간 Pipelined HTTP와 같이 [요청-응답][요청-응답]형태로 반복된다. Multiplexed HTTP처럼 병렬적으로 처리하는 것은 불가능하다.

<br/>

### 3. 헤더 압축

- HTTP/1.1은 헤더 정보가 텍스트 형태로 전송되므로 헤더 크기가 커지면 불필요한 대기 시간이 발생할 수 있다.
  - 예: 클라이언트가 2번의 요청을 보낸다. HTTP/1.1은 2개의 요청 헤더를 중복값이 존재해도 그냥 중복 전송을 진행한다.
- HTTP/2.0은 헤더 정보를 압축해 전송한다. 불필요한 대기 시간을 최소화하고 전송 속4도를 높일 수 있다.
  - HTTP/2.0은 헤더 정보를 HPACK 압축방식을 이용해 압축 후 전송한다.
  - HPACK은 Huffman 코딩과 정적/동적 테이블을 이용해 중복되는 헤더 정보를 압축한다.
  - 중복되는 헤더 정보를 정적/동적 테이블에 저장하고 인덱스 번호로 참조해 중복 전송을 피한다.

<br />

### 4. 서버 푸시

- HTTP/2.0은 서버 푸시 기능을 지원한다.
- 서버에서 클라이언트 요청에 대한 응답으로 데이터를 보내는 것뿐만 아니라 클라이언트가 요청하지 않은 데이터도 미리 보낼 수 있다.

  - HTTP/1.1에서는 웹 페이지에서 HTML 파일을 요청하면 서버는 해당 HTML 파일을 전송한다. 이때 HTML 파일에서 사용하는 이미지, 스크립트, 스타일시트 등 리소스는 클라이언트가 요청해야만 전송된다.
  - 서버 푸시를 이용하면 서버가 HTML 파일을 전송하는 동시에 해당 HTML 파일에서 사용하는 리소스를 미리 클라이언트에게 전송할 수 있다.

- 이를 통해 클라이언트는 추가적인 요청 없이 더 빠르게 페이지를 로딩할 수 있고 서버와의 대기 시간을 줄일 수 있다.
- 또한 서버는 클라이언트가 필요로 할 리소스를 미리 알고 있어 불필요한 요청을 줄인다.

<br/>

## HTTP/2.0과 HTTP/3.0 차이점

### 1. 전송 방식

- HTTP/2.0과 3.0의 대표적인 차이는 전송 방식에 있다.
- HTTP/2.0은 TCP를 기반으로 동작한다.
- HTTP/3.0은 QUIC(Quick UDP Internet Connections) 프로토콜을 사용한다.
- QUIC은 UDP를 기반으로 해 TLS 보안 프로토콜을 내장한다.
- 따라서, 데이터의 암호화/복호화를 더욱 강화한다.
- 이를 통해 서버 - 클라이언트 간 통신이 더 빠르고 안전하게 이루어진다.

<br/>

### 2. 헤더 압축

- HTTP/2.0은 HPACK 압축 알고리즘을 사용해 헤더를 압축한다.
- HTTP/3.0은 QPACK 압축 알고리즘을 사용한다. 유사하지만 더욱 효율적인 압축을 제공한다.

<br/>

### 3. 무결성 검사

- HTTP/3.0은 QUIC의 특성을 활용해 데이터 무결성을 검사하기 위해 크기가 작은 패킷을 사용한다.
- 이를 통해 데이터 무결성 검사를 쉽게 수행할 수 있다.
- 더 나은 성능, 안정성을 제공하고 사용자 경험을 향상시키는데 도움을 준다.

<br/>

### 4. 지연 시간 감소

- HTTP/3.0의 QUIC 프로토콜은 UDP 기반으로 동작하며 TCP와 다르게 연결설정, 해제 과정을 필요로하지 않아서 지연 시간이 감소하고 통신 속도가 빨라진다.
- 하지만 handshake를 완전히 안하는 것이 아니라 3-way-handshake, 4-way-handshake 대신 1-RTT(One Round Trip Time) handshake를 사용한다.
- 1-RTT란 초기에 클라이언트 - 서버 간 통신 설정시 1번의 왕복 시간만을 사용해 handshake를 수행한다.
  - 이를 위해 클라이언트는 요청과 함께 '암호화 된 연결 설정 정보'를 서버로 전송하며 서버는 이 정보를 사용해 클라이언트와의 연결을 설정한다.
